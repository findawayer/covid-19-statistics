(this["webpackJsonpcovid-19-statistics"]=this["webpackJsonpcovid-19-statistics"]||[]).push([[0],{15:function(e,t,r){},22:function(e,t,r){"use strict";r.r(t);var n=r(0),a=(r(15),r(1)),i=r.n(a),c=r(10),o=r(4),s=r.n(o),l=r(5),d=r(8),u=r(3);function b(){return"caches"in window}function h(e,t){return p.apply(this,arguments)}function p(){return(p=Object(l.a)(s.a.mark((function e(t,r){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b()){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,window.caches.open(t);case 4:return n=e.sent,e.abrupt("return",n.match(r));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e,t,r){return j.apply(this,arguments)}function j(){return(j=Object(l.a)(s.a.mark((function e(t,r,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,window.caches.open(t);case 4:return e.sent.put(r,n),e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=300;function y(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;return function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var c=this;window.clearTimeout(t),t=window.setTimeout((function(){e.apply(c,a)}),r)}}function m(e){return"number"===typeof e&&!Number.isNaN(e)&&Number.isFinite(e)}var x={data:null,loading:!0,error:null},v=function(e,t){switch(t.type){case"setError":return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:t.payload});case"setData":return Object(u.a)(Object(u.a)({},e),{},{loading:!1,data:t.payload});default:throw new Error("Unhandled action type.")}},w=r(12),O="descending",k=function(e,t){var r=Object(a.useState)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(u.a)({filterKey:null,filterKeyword:null,sortKey:null,sortDirection:O},e)}(t)),n=Object(d.a)(r,2),i=n[0],c=n[1];return{processedData:Object(a.useMemo)((function(){if(!e)return null;var t=Object(w.a)(e);return t=function(e,t){var r=t.sortKey,n=t.sortDirection;if(!r)return e;var a="descending"===n;return e.sort((function(e,t){var n=e[r],i=t[r];return m(n)&&m(i)?function(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?t-e:e-t}(n,i,a):function(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?String(t).localeCompare(String(e)):String(e).localeCompare(String(t))}(n,i,a)}))}(t=function(e,t){var r=t.filterKey,n=t.filterKeyword;if(!r||!n)return e;var a=new RegExp(n,"i"),i=function(e){return a.test(String(e))};return e.filter((function(e){return i(e[r])}))}(t,i),i)}),[i,e]),dataOptions:i,handleColumnClick:function(e){return function(t){t.preventDefault(),c((function(t){return t.sortKey===e?Object(u.a)(Object(u.a)({},t),{},{sortDirection:(r=t.sortDirection,"ascending"===r?"descending":"ascending")}):Object(u.a)(Object(u.a)({},t),{},{sortKey:e,sortDirection:O});var r}))}},handleKeywordChange:function(e){c((function(t){return Object(u.a)(Object(u.a)({},t),{},{filterKeyword:e.target.value||null})}))}}};var S=r(2),C=r.p+"static/media/chevron-down.24c82cb7.svg";var K=Object(S.a)("table",{target:"ewgwx1a3",label:"StyledTable"})({name:"gvcw3j",styles:"position:relative;width:100%;border-collapse:separate;border-spacing:0"}),D=Object(S.a)("td",{target:"ewgwx1a2",label:"StyledCell"})({name:"jymxrv",styles:"padding:0.75em 1em;border:double #ccc;border-width:0 1px 1px 0;text-align:left;&:last-child{border-right-width:0;}"}),z=Object(S.a)(D,{target:"ewgwx1a1",label:"StyledHeadCell"})({name:"xg43jz",styles:"position:sticky;top:0;padding-top:1em;padding-bottom:1em;border-top-width:1px;background-color:#eee;font-weight:700;cursor:pointer"}).withComponent("th",{target:"ewgwx1a4",label:"StyledHeadCell"}),A=Object(S.a)("i",{target:"ewgwx1a0",label:"StyledSortIcon"})("width:1rem;height:1rem;float:right;visibility:",(function(e){return e.isActive?"visible":"hidden"}),";background:url(",C,") no-repeat center/100% auto;",(function(e){return e.isAscending&&"transform: rotate(-0.5turn);"}),";"),E=function(e){var t=e.item,r=e.columns;return Object(n.jsx)("tr",{children:r.map((function(e){var r,a=e.key;return Object(n.jsx)(D,{children:(r=t[a],m(r)?r.toLocaleString("kr"):String(r))},a)}))})},N=function(e){var t=e.data,r=e.columns,a=e.idKey,i=e.sortKey,c=e.sortDirection,o=e.handleColumnClick;return Object(n.jsxs)(K,{children:[Object(n.jsx)("thead",{"data-testid":"thead",children:Object(n.jsx)("tr",{children:r.map((function(e){var t=e.key,r=e.alias;return Object(n.jsxs)(z,{onClick:o?o(t):void 0,"data-testid":t,children:[null!==r&&void 0!==r?r:t,Object(n.jsx)(A,{isActive:t===i,isAscending:"ascending"===c})]},t)}))})}),Object(n.jsx)("tbody",{"data-testid":"tbody",children:t&&t.map((function(e){return Object(n.jsx)(E,{item:e,columns:r},e[a])}))})]})};var R=Object(S.a)("div",{target:"e1xi0cf10",label:"StyledLoading"})({name:"1aslf6p",styles:"position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)"}),M=function(e){var t=e.size,r=void 0===t?64:t;return Object(n.jsx)(R,{"aria-label":"Loading",children:Object(n.jsx)("svg",{width:r,height:r,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"#3498DB",children:Object(n.jsx)("g",{fill:"none",fillRule:"evenodd",children:Object(n.jsxs)("g",{transform:"translate(1 1)",strokeWidth:"2",children:[Object(n.jsx)("circle",{strokeOpacity:".5",cx:"18",cy:"18",r:"18"}),Object(n.jsx)("path",{d:"M36 18c0-9.94-8.06-18-18-18",children:Object(n.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})})]})})})})},T=Object(a.memo)(M);var B=Object(S.a)("input",{target:"edo5wnn0",label:"StyledSearch"})({name:"bopy22",styles:"display:block;width:15em;padding:0.75em 1em;background:#fff;border:1px solid #ccc;box-shadow:0 1px 3px rgba(0, 0, 0, 0.12),0 1px 2px rgba(0, 0, 0, 0.24);transition:width 0.1s;&:focus{width:25em;outline:0;border-color:#000;}"}),H=function(e){var t=e.handleChange;return Object(n.jsx)(B,{type:"search",placeholder:"\uad6d\uac00\ub85c \uac80\uc0c9",onChange:y(t)})};var L=Object(S.a)("div",{target:"errsibz3",label:"StyledCovidStatHeader"})({name:"1advly2",styles:"height:4rem;margin-bottom:1rem;display:flex;align-items:center;justify-content:space-between"}),q=Object(S.a)("h1",{target:"errsibz2",label:"StyledCovidStatTitle"})({name:"whczbu",styles:"margin:0;flex:1 1 auto;font-size:2rem;font-weight:700;text-overflow:ellipsis;white-space:nowrap"}),F=Object(S.a)("div",{target:"errsibz1",label:"StyledCovidStatBody"})({name:"do9fhx",styles:"height:calc(100vh - 8rem);overflow:auto;box-shadow:0 1px 3px rgba(0, 0, 0, 0.12),0 1px 2px rgba(0, 0, 0, 0.24)"}),I=Object(S.a)("div",{target:"errsibz0",label:"StyledCovidStatScroll"})({name:"y3uulh",styles:"position:relative;min-width:50em;height:100%"}),J=[{key:"country",alias:"\uad6d\uac00"},{key:"confirmed",alias:"\ud655\uc9c4\uc790"},{key:"recovered",alias:"\uc644\uce58\uc790"},{key:"critical",alias:"\uce58\uba85\uc801"},{key:"deaths",alias:"\uc0ac\ub9dd\uc790"}],U=function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.cacheKey,n=t.cacheMaxAge,i=Object(a.useReducer)(v,x),c=Object(d.a)(i,2),o=c[0],u=o.data,b=o.loading,p=o.error,j=c[1],g=Object(a.useRef)({key:r,timestamp:0});return Object(a.useEffect)((function(){function t(){return(t=Object(l.a)(s.a.mark((function t(){var r,a,i,c,o,l,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=g.current.key&&n,a=Date.now()-g.current.timestamp<(n||0),i=new Request(e),!r||!a){t.next=9;break}return t.next=6,h(g.current.key,i);case 6:t.t0=t.sent,t.next=10;break;case 9:t.t0=null;case 10:if(null===(c=t.t0)||void 0===c){t.next=15;break}t.t1=c,t.next=18;break;case 15:return t.next=17,fetch(e);case 17:t.t1=t.sent;case 18:if((o=t.t1).ok){t.next=23;break}return l=new Error("Request failed: ".concat(e)),j({type:"setError",payload:l}),t.abrupt("return");case 23:return r&&!a&&f(g.current.key,i,o.clone()),t.next=26,o.json();case 26:d=t.sent,j({type:"setData",payload:d});case 28:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[n,j,e]),{data:u,loading:b,error:p}}("https://covid19-api.com/country/all",{cacheKey:"covid19-country-all",cacheMaxAge:36e5}),t=e.data,r=e.loading,i=e.error,c=k(t,{filterKey:"country",sortKey:"country",sortDirection:"ascending"}),o=c.processedData,u=c.dataOptions,b=u.sortKey,p=u.sortDirection,j=c.handleColumnClick,g=c.handleKeywordChange;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(L,{children:[Object(n.jsx)(q,{children:"\ucf54\ub85c\ub098 \ubc14\uc774\ub7ec\uc2a4 \uc138\uacc4 \ud604\ud669"}),Object(n.jsx)(H,{handleChange:g})]}),Object(n.jsx)(F,{children:Object(n.jsx)(I,{children:r?Object(n.jsx)(T,{}):i?Object(n.jsx)("p",{children:i.message}):t?Object(n.jsx)(N,{data:o,columns:J,idKey:"country",sortKey:b,sortDirection:p,handleColumnClick:j}):Object(n.jsx)("p",{children:"No data!"})})})]})},W=function(){return Object(n.jsx)(U,{})};Object(c.render)(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(W,{})}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.7eddc80c.chunk.js.map